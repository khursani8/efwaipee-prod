 <script type="text/javascript" src="assets/libs/instascan.min.js"></script> 
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://aframe.io/releases/0.6.0/aframe.js"></script>
<script src="https://rawgit.com/jeromeetienne/AR.js/master/aframe/build/aframe-ar.js"></script>   



<body style='margin : 0px; overflow: hidden;'>
	 <!-- <video id="preview"></video>  -->
	<a-scene embedded arjs='sourceType: webcam;'>
		<a-entity class="checkpoint"
			rotation="270 0 0"
			geometry="primitive: plane; width: 1.5; height: auto"
			text="width:4; align: center; value: Checkpoint;"
		>
		</a-entity>
		<a-marker-camera preset='hiro'></a-marker-camera>
	</a-scene>
</body>


<script>
	scanner = new Instascan.Scanner({ video: document.getElementById('preview'),refractoryPeriod: 5000 });
	scanner.addListener('scan', function (content) {
	
		$.get('/api/thesis/'+content,function(data){
			// alert(data);
			console.log(data);
			$('.checkpoint[rotation]')[0].setAttribute('text','width:4; align: center; value: '+data.name)
		})

	});
	Instascan.Camera.getCameras().then(function (cameras) {
	if (cameras.length > 0) {
		menu = "Choose camera\n";
		let count = 0;
		cameras.forEach(function(element) {
		menu += count++ + ". " + element.name + "\n"
		}, this);
		no = prompt(menu)
		scanner.start(cameras[no])
		.then(function(){
			$('#name').append(cameras[no].name)
		})
		
	} else {
		console.error('No cameras found.');
		$("#test").append('no camera');
	}
	}).catch(function (e) {
	console.error(e);
	$("#test").append(e);
	});
</script>
